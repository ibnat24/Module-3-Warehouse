## What This Script Does

`algorithm.py` takes randomly generated order data and solves three operational decisions to minimize **makespan** (the total time to complete all orders) on the conveyor belt system.

The conveyor has 4 belts arranged in a loop. Each belt has one scanner and one bin. Items travel along the belt; when a scanner detects an item that matches its bin's active order, a pneumatic arm drops the item into the bin. Items that don't belong to a belt's order keep travelling to the next scanner, 6 seconds away.

The script tells you:
1. **Which order to assign to which lane/bin**
2. **Which order to load totes onto the belt**
3. **Which order to place individual items from each tote onto the belt**

It also generates the **conveyor input CSV** that gets uploaded to the IDEAS Clinic system, and runs a **benchmark across 50 random instances** to prove the heuristics outperform the baseline.

---

## Files Required

Place all four files in the same folder before running:

```
üìÅ your-folder/
    algorithm.py   ‚Üê the script
    order_itemtypes.csv              ‚Üê randomly generated (item types per order)
    order_quantities.csv             ‚Üê randomly generated (quantities per order)
    orders_totes.csv                 ‚Üê randomly generated (tote IDs per order)
```

The three CSV files are generated by the course-provided random data generator. Regenerate them to get a new instance ‚Äî the script will automatically adapt.

---

## How to Run

```bash
python algorithm.py
```

No external libraries required ‚Äî only Python 3 standard library.

---

## Output

**Terminal output (3 sections):**

**Section 1 ‚Äî Heuristic Comparison Table**
Shows all 5 strategies side by side with makespan, % improvement vs. baseline, total completion time, and average completion time.

**Section 2 ‚Äî Complete Demo Instructions**  
Step-by-step physical instructions for the demo station:
- Step 1: Which CSV to upload to the IDEAS Clinic system
- Step 2: Which totes to load and in what order
- Step 3: Within each tote, which items to place on the belt first and why

**Section 3 ‚Äî Random Instance Benchmark**  
Tests all strategies across 50 randomly generated instances and reports wins, average makespan, and average saving vs. baseline. This is the numerical validation for Phase 1.

**File output:**
- `conveyor_input_LPT_PENALTY.csv` ‚Äî upload this to the IDEAS Clinic conveyor system

---

## The Three Decisions & Heuristics

The script compares multiple heuristics across three independent decision dimensions:

### Decision 1 ‚Äî Tote Sequence
*Which tote do you physically pick up and load first?*

| Heuristic | Logic |
|---|---|
| Baseline | Load totes in ascending tote ID order |
| **EOCF** (Earliest Order Completion First) | Load totes that serve orders needing the fewest total totes first ‚Äî those orders can complete as soon as their one tote is processed |
| MIPTF (Most Items Per Tote First) | Load totes that serve the most simultaneous orders first |

### Decision 2 ‚Äî Lane Assignment
*Which order goes in which bin?*

| Heuristic | Logic |
|---|---|
| Baseline | Assign by order ID mod 4 (order 0‚Üílane 0, order 1‚Üílane 1, etc.) |
| **LPT + Lane Penalty** | Assign the order whose last tote arrives latest to Lane 0. Lane 0's scanner is hit first every circulation so items are sorted with zero travel time. The hardest order gets the fastest lane. Based on LPT (Longest Processing Time) parallel machine scheduling. |

### Decision 3 ‚Äî Item Placement Sequence
*Within a tote, which item do you place on the belt first?*

| Heuristic | Logic |
|---|---|
| Naive | Place items in ascending item-type order |
| **FLF** (Furthest Lane First) | Place items going to the highest-numbered lane first. Those items need to travel past more scanners (Lane 3 = 18s travel, Lane 0 = 0s travel). Getting them moving first means all items arrive at their destinations around the same time. |

### Recommended Strategy
**EOCF tote sequence + LPT+Penalty lane assignment + FLF item placement**

This combination achieves the **theoretical minimum makespan** on the demo instance and wins on **50 out of 50** random benchmark instances with an average saving of **17.7 seconds (‚àí12.6%)** vs. baseline.

---

## Simulation Model

The simulation models the physical belt with the following assumptions:

| Parameter | Value | Description |
|---|---|---|
| `TRAVEL_TIME` | 6s | Travel time between consecutive scanners |
| `FULL_LOOP` | 24s | Time for one full belt circulation (4 √ó 6s) |
| `NUM_LANES` | 4 | Number of conveyor lanes/bins |
| `NUM_ORDERS` | 4 | Orders used in demo (first 4 from CSV) |
| `ITEM_PLACE_TIME` | 2s | Time to physically place one item on belt |

**Makespan formula per order:**  
`completion(order) = tote_load_time + lane √ó TRAVEL_TIME`  
where `tote_load_time = tote_position √ó FULL_LOOP`

**Makespan = max completion time across all orders**

---

## Benchmark Results (n=50 random instances)

| Strategy | Avg Makespan | Wins | Avg Saving | vs Baseline |
|---|---|---|---|---|
| Baseline | 140.8s | 0/50 | 0s | ‚Äî |
| EOCF Totes only | 135.7s | 21/50 | ‚àí5.1s | ‚àí3.6% |
| LPT Lanes only | 122.8s | 50/50 | ‚àí18.0s | ‚àí12.8% |
| FLF Items only | 140.8s | 0/50 | 0s | 0% |
| **EOCF + LPT + FLF ‚òÖ** | **123.1s** | **50/50** | **‚àí17.7s** | **‚àí12.6%** |

LPT Lane Assignment is the dominant heuristic ‚Äî it wins on every single random instance. FLF Items shows 0 improvement on this specific dataset because the totes happen to contain items that all go to the same lane (no mixed-lane totes), but is included in the combined strategy for robustness on other instances.

---

## Adjustable Settings

At the top of `MSE433_warehousing_analysis.py`:

```python
NUM_ORDERS      = 4    # change to use more orders (up to 11 in the CSV)
ITEM_PLACE_TIME = 2    # seconds to place one item ‚Äî adjust if timed at demo station
TRAVEL_TIME     = 6    # seconds between scanners ‚Äî fixed by physical system
```